---
font: Lato
fontsize: 10pt
geometry: left=1in,right=1in,top=0.35in,bottom=0.6in
header-includes: null
output:
  html_document:
    df_print: paged
sansfont: Lato
urlcolor: null
---


```{r rmarkdown-setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)
knitr::opts_chunk$set(dev = "cairo_pdf")
options(knitr.kable.NA = "")
options(kableExtra.latex.load_packages = FALSE)

setwd("GitHub/covid19-indicators")

library(tidyverse)
library(knitr)
library(kableExtra)
library(ggplot2)
library(plotly)
library(scales)
```


# LA's COVID-19 Reopening Indicators

This report contains information about how LA County and the City of LA performed yesterday, on a number of key COVID-19 indicators related to the speed at which opening up can occur. Taken together, performing well against the benchmarks provide confidence in moving through each phase of reopening.

**LA is certainly an epicenter**. LA reached [5,000 deaths](https://www.latimes.com/california/story/2020-08-11/13000-more-coronavirus-cases-california-test-results-backlog) by mid-August, the 3rd highest US county by deaths, after Queens and Kings Counties in New York.

## Case Charts


```{r echo=FALSE,  fig.width =7 , fig.height =2}
# arbitrary data to demonstrate a table
#today_date = sys.Date()
data <- read.csv(file = "data/city-of-la-cases.csv", header = TRUE, sep = ",")

data$date <- as.Date(factor(data$date))

#sapply(data, class)

df <- tail(data, 5)


kable(df, format.args = list(big.mark = ",")) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed"), 
                position = "float_left") %>%
  column_spec(1, bold = T, border_right = T)

```

Blah blah blah



```{r echo=FALSE,  fig.width =7 , fig.height =2}

# Line chart of all cases
cases <- ggplot() + 
      geom_line(
        aes(y = city_cases, x = date), data = data, color = "blue") +
        xlab("date") + ylab("# cumulative cases") + 
        ggtitle("City of LA\nTotal Cases") +
        theme(
          plot.title = element_text(family = "Lato", face = "bold", color = "gray", 
                                    size = 14, hjust=0.5), 
          axis.title.x = element_text(size = 10), 
          axis.title.y = element_text(size=10), 
          axis.text.x = element_text(size=9)
          ) +
        scale_x_date(labels = date_format("%m-%d"), breaks = date_breaks("2 weeks")
        ) 

cases <- ggplotly(cases)
cases

```


```{r echo=FALSE,  fig.width =7 , fig.height =2}
# arbitrary data to demonstrate a table
data <- tribble(~Industry, ~workers, ~increase,
  "Retail trade", 1000, 10,
  "Accomodation and food services", 989, 10,
  "Manufacturing", 54, 10,
  "Health care", 54, 10,
  "Administrative services", 10, 10,
  "Construction", 12, 10,
  "Male, unmarried or spouse not present", 145, 10,
  "Female, unmarried or spouse not present", 88, 10,
  "Married couple", 89, 10)

kable(data, format = "html", booktabs = TRUE,
      col.names = c(" ", "Thousands of variable 1", "Variable 2 ($)"),
      align = c("l", "c", "c"),
      linesep = "") %>%
  kable_styling(full_width = TRUE) %>%
  pack_rows("Industry", 1, 6) %>%
  pack_rows("Sex and marital status", 7, 9) %>%
  column_spec(1, width = "7cm") %>%
  column_spec(2, width = "4.75cm") %>%
  row_spec(0, bold = TRUE,
           extra_css = "border-top: 0; border-bottom:5px solid red;") %>%
  add_header_above(c(" " , " ", " "))
```

